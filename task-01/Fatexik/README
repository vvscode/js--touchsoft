Пример работающего кода:

https://output.jsbin.com/kahodew/

Работающие тесты:

https://output.jsbin.com/valimoc/