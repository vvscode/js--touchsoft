Пример работающего кода:

http://jsbin.com/pijere/10/edit?html,js,output

Работающие тесты:

http://jsbin.com/quyegix/6/edit?html,output
